<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- <link rel="stylesheet" href="/floating-button-sdk.css">
    <link rel="stylesheet" href="/global.css"> -->
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-K6R9Z9D8EP"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-K6R9Z9D8EP', { 'debug_mode': true });
    </script>
    <!-- Google Tag Manager -->
    <script>(function (w, d, s, l, i) {
        w[l] = w[l] || []; w[l].push({
            'gtm.start':
            new Date().getTime(), event: 'gtm.js'
        }); var f = d.getElementsByTagName(s)[0],
            j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src =
            'https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);
        })(window, document, 'script', 'dataLayer', 'GTM-5VRNPTQW');</script>
    <!-- End Google Tag Manager -->
    <title>Document</title>
</head>
<body>
    <!-- <script src="https://d3qrvyizob9ouf.cloudfront.net/sdk.js"></script> -->
    <!-- <script src="./dist/gentoo-sdk.js"></script> -->
    <script src="./sdk.js"></script>
    <script>
        // Initialize GentooIO parameters
        GentooIO('boot', {
            udid: 'test-udid', // optional, only for dlst
            authCode: 'test-auth-code',
            // partnerId: '6889b848aac23b0c81675a12', // product team test dev
            partnerId: '67516ecf103e7e29c75a621e', // fastfive dev
            itemId: '', // optional, only @PRODUCT_DETAIL page
            displayLocation: 'HOME', // 'HOME' | 'PRODUCT_DETAIL' | 'PRODUCT_LIST'
            // partnerType: 'shopify',
        })

        // Render Floating Button
        GentooIO('init', {
            position: {
                web: {
                    bottom: 100,
                    right: 100,
                },
                mobile: {
                    bottom: 60,
                    right: 10,
                }
            },
            showGentooButton: true,
            isCustomButton: false,
        });

        GentooIO('getGentooShowEvent', {
            callback: () => {
                console.log('getGentooShowEvent called');
            }
        });

        GentooIO('getGentooClickEvent', {
            callback: () => {
                console.log('getGentooClickEvent called');
            }
        });

        GentooIO('getFormSubmittedEvent', {
            callback: (params) => {
                console.log('getFormSubmittedEvent called');
            }
        });
        GentooIO('unmount', {});

        // test case 1 : 1500 times per 40ms
        // (function() {
        //     let count = 0;
        //     const maxCount = 1500;
        //     const duration = 60000;
        //     const intervalMs = duration / maxCount;
        //     const interval = setInterval(() => {
        //         const basicPayload = {
        //             sessionId: 'sess-1753856485296-xkwyo612',
        //             externalKey: '6889b848aac23b0c81675a12',
        //             chatUserId: '8EJqkU2m6HDzui65PP3wEc0SgTEJpvst',
        //             userId: 'jintaebaek',
        //             anonymousId: null,
        //             displayLocation: 'HOME',
        //             pageLocation: window.location.href,
        //             itemId: count,
        //         }
    
        //         const customPayload = {
        //             referrerOrigin: 'https://www.google.com',
        //         }
                
        //         const sendEventLog = (event, basicPayload = {}, customPayload = {}) => {
        //             // if (!customPayload.referrerOrigin) return;
                    
        //             const payload = {
        //                 event,
        //                 timestamp: Date.now(),
        //                 ...basicPayload,
        //                 ...customPayload,
        //             }
    
        //             const url = `https://dev-tracking.gentooai.com/api/v1/beacon/track`;
        //             navigator.sendBeacon(
        //                 url,
        //                 JSON.stringify(payload)
        //             );
        //         }

        //         sendEventLog('PageTransitionTest', basicPayload, customPayload);
        //         count++;
        //         if (count >= maxCount) {
        //             clearInterval(interval);
        //         }
        //     }, intervalMs);
        // })();

        // test case 2 : 1500 times no interval
        // (function() {
        //     let count = 0;
        //     const maxCount = 1500;
        //     // const duration = 60000;
        //     // const intervalMs = duration / maxCount;
        //     const interval = setInterval(() => {
        //         const basicPayload = {
        //             sessionId: 'sess-1753856485296-xkwyo612',
        //             externalKey: '6889b848aac23b0c81675a12',
        //             chatUserId: '8EJqkU2m6HDzui65PP3wEc0SgTEJpvst',
        //             userId: 'jintaebaek',
        //             anonymousId: null,
        //             displayLocation: 'HOME',
        //             pageLocation: window.location.href,
        //             itemId: count,
        //         }
    
        //         const customPayload = {
        //             referrerOrigin: 'https://www.google.com',
        //         }
                
        //         const sendEventLog = (event, basicPayload = {}, customPayload = {}) => {
        //             // if (!customPayload.referrerOrigin) return;
                    
        //             const payload = {
        //                 event,
        //                 timestamp: Date.now(),
        //                 ...basicPayload,
        //                 ...customPayload,
        //             }
    
        //             const url = `https://dev-tracking.gentooai.com/api/v1/beacon/track`;
        //             navigator.sendBeacon(
        //                 url,
        //                 JSON.stringify(payload)
        //             );
        //         }

        //         sendEventLog('PageTransition', basicPayload, customPayload);
        //         count++;
        //         if (count >= maxCount) {
        //             clearInterval(interval);
        //         }
        //     });
        // })();

        // test case 3 : 500times repeat 3 times per 20s
        // (function() {
        //     let count = 0;
        //     const maxCount = 3;
        //     const duration = 60000;
        //     const intervalMs = duration / maxCount;
        //     const interval = setInterval(() => {
        //         const chatUserId = [
        //             'chatuser-1',
        //             'chatuser-2',
        //             'chatuser-3',
        //         ];

        //         let innerCount = 0;
        //         const maxInnerCount = 500;
        //         const innerInterval = setInterval(() => {
        //             const basicPayload = {
        //                 sessionId: 'sess-1753856485296-xkwyo612',
        //                 externalKey: '6889b848aac23b0c81675a12',
        //                 chatUserId: chatUserId[count],
        //                 userId: 'test5',
        //                 anonymousId: null,
        //                 displayLocation: 'HOME',
        //                 pageLocation: window.location.href,
        //                 itemId: innerCount + (count * maxInnerCount),
        //             }
                    
        //             const customPayload = {
        //                 referrerOrigin: 'https://www.google.com',
        //             }
                    
        //             const sendEventLog = (event, basicPayload = {}, customPayload = {}) => {
        //                 // if (!customPayload.referrerOrigin) return;
                        
        //                 const payload = {
        //                     event,
        //                     timestamp: Date.now(),
        //                     ...basicPayload,
        //                     ...customPayload,
        //                 }
        
        //                 const url = `https://dev-tracking.gentooai.com/api/v1/beacon/track`;
        //                 navigator.sendBeacon(
        //                     url,
        //                     JSON.stringify(payload)
        //                 );
        //             }
    
        //             sendEventLog('PageTransition', basicPayload, customPayload);
        //             innerCount++;
        //             if (innerCount >= maxInnerCount) {
        //                 clearInterval(innerInterval);
        //             }
        //         });

        //         count++;
        //         if (count >= maxCount) {
        //             clearInterval(interval);
        //         }
        //     }, intervalMs);
        // })();

        // test case 4 : 1500 scroll event per 80~120ms randomly
        // (function() {
        //     let count = 0;
        //     const maxCount = 1500;
        //     const intervalMs = Math.floor(Math.random() * 40) + 80;
        //     const interval = setInterval(() => {
        //         const documentHeight = 4064;
        //         const viewportHeight = 916;
        //         let scrollTop = Math.sin(count/100) * 1000;
        //         let scrollPercentage = scrollTop / (documentHeight - viewportHeight);
        //         const basicPayload = {
        //             event: "Scroll",
        //             timestamp: Date.now(),
        //             sessionId: 'sess-1753856485296-xkwyo612',
        //             externalKey: '6889b848aac23b0c81675a12',
        //             chatUserId: '8EJqkU2m6HDzui65PP3wEc0SgTEJpvst',
        //             userId: 'jintaebaek',
        //             anonymousId: null,
        //             displayLocation: "PRODUCT_DETAIL",
        //             pageLocation: window.location.href,
        //             itemId: null,
        //             scrollTop: scrollTop,
        //             documentHeight: documentHeight,
        //             viewportHeight: viewportHeight,
        //             scrollPercentage: scrollPercentage,
        //         }
    
        //         const customPayload = {
        //             referrerOrigin: 'https://www.google.com',
        //         }
                
        //         const sendEventLog = (event, basicPayload = {}, customPayload = {}) => {
        //             // if (!customPayload.referrerOrigin) return;
                    
        //             const payload = {
        //                 event,
        //                 timestamp: Date.now(),
        //                 ...basicPayload,
        //                 ...customPayload,
        //             }
    
        //             const url = `https://dev-tracking.gentooai.com/api/v1/beacon/track`;
        //             navigator.sendBeacon(
        //                 url,
        //                 JSON.stringify(payload)
        //             );
        //         }

        //         sendEventLog('PageTransitionTest', basicPayload, customPayload);
        //         count++;
        //         if (count >= maxCount) {
        //             clearInterval(interval);
        //         }
        //     }, intervalMs);
        // })();

    </script>
    <div>
        <div>
            <div style="display: flex; flex-direction: column; align-items: stretch; height: 100%;">
                <div style="width: 100%; height: 400px; background: orange;">
                    box1
                </div>
                <div style="display: flex; width: 100%; height: fit-content";>
                    <div style="flex: 1; height: 300px; background: yellowgreen;">
                        <button 
                            class="gentoo-custom-button"
                            style="padding: 10px 20px;"
                        >Open Chat</button>
                    </div>
                    <div style="flex: 1; height: 300px; background: lightcoral;">
                        box3
                    </div>
                </div>
                <div style="width: 100%; height: 800px; background: lightblue;">
                    box4
                </div>
            </div>
        </div>
    </div>
</body>
</html>